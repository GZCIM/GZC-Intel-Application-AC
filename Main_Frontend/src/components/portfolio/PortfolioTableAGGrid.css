/* Main AG Grid container - fills available space */
.ag-theme-alpine {
    /* Use GZC CSS custom properties for consistent theming */
    --ag-background-color: var(--gzc-bg, #111111);
    --ag-foreground-color: var(--gzc-text, #eaeaea);
    --ag-border-color: var(--gzc-border, #333333);
    --ag-header-background-color: var(--gzc-surface-alt, #1e1e1e);
    --ag-header-foreground-color: var(--gzc-text, #eaeaea);
    --ag-odd-row-background-color: var(--gzc-surface, #1e1e1e);
    --ag-even-row-background-color: var(--gzc-bg, #111111);
    --ag-hover-color: var(--gzc-surface-alt, #2a2a2a);
    --ag-selected-color: var(--gzc-surface-alt, #2a2a2a);
    --ag-range-selection-background-color: rgba(106, 168, 79, 0.2);
    --ag-range-selection-border-color: var(--gzc-success, #6aa84f);
    --ag-cell-horizontal-border: 1px solid var(--gzc-border, #333333);
    --ag-cell-vertical-border: 1px solid var(--gzc-border, #333333);
    --ag-header-cell-horizontal-border: 1px solid var(--gzc-border, #333333);
    --ag-header-cell-vertical-border: 1px solid var(--gzc-border, #333333);
    --ag-font-size: 9px;
    --ag-font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
        "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans",
        "Helvetica Neue", sans-serif;

    /* Main AG Grid container - fills available space with proper height */
    height: 100% !important;
    min-height: 150px !important; /* Reduced minimum height for smaller containers */
    display: flex !important;
    flex-direction: column !important;
    overflow: visible !important; /* CRITICAL: Allow scrollbars to show and be functional */
}

/* Root wrapper - contains the entire grid */
.ag-theme-alpine .ag-root-wrapper {
    width: 100% !important;
    height: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: visible !important; /* CRITICAL: Allow scrollbars to show and be functional */
    max-height: 100% !important;
    padding-bottom: 0; /* align grid bottom border with component */
}

/* Root element - the main grid container */
.ag-theme-alpine .ag-root {
    height: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: visible !important; /* CRITICAL: Allow scrollbars to show and be functional */
    width: 100% !important;
    max-height: 100% !important;
}

/* Body container - contains rows and viewport */
.ag-theme-alpine .ag-body {
    height: calc(
        100% - 20px
    ) !important; /* Reserve space for horizontal scrollbar */
    max-height: calc(
        100% - 20px
    ) !important; /* Reserve space for horizontal scrollbar */
    overflow: visible !important; /* CRITICAL: Allow scrollbars to show and be functional */
    width: 100% !important;
    flex: 1 !important; /* Fill remaining space */
    min-height: 150px !important; /* Reduced minimum height for smaller containers */
}

/* AG Grid body viewport - disable ALL internal scrollbars */
.ag-theme-alpine .ag-body-viewport {
    width: 100% !important;
    height: 100% !important;
    overflow: hidden !important; /* CRITICAL: Disable ALL AG Grid scrollbars */
    scrollbar-gutter: stable both-edges;
    position: relative;
    z-index: 1;
    flex: 1 !important;
    background-color: var(--gzc-bg, #111111) !important;
    min-height: 0 !important;
    max-height: 100% !important;
    /* Remove borders since we're using custom scrollbar */
    border: none !important;
    /* Ensure proper scrolling context for custom scrollbars */
    scroll-behavior: smooth;
}

/* Center columns viewport - disable ALL scrollbars */
.ag-theme-alpine .ag-center-cols-viewport {
    overflow: hidden !important; /* CRITICAL: Disable ALL scrollbars */
    scrollbar-gutter: stable both-edges;
}

/* Center columns container - holds the row data */
.ag-theme-alpine .ag-center-cols-container {
    /* Avoid forcing the grid wider than viewport; let columns define min width */
    min-width: 100% !important;
    width: max-content !important; /* grow only as needed for columns */
}

/* Horizontal scrollbar container - disable it */
.ag-theme-alpine .ag-body-horizontal-scroll {
    display: none !important; /* CRITICAL: Hide horizontal scrollbar completely */
}

/* Hide ALL native scrollbars completely */
.ag-theme-alpine .ag-body-viewport::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
}

/* Force scrollbar invisibility for Firefox */
.ag-theme-alpine .ag-body-viewport {
    scrollbar-width: none !important;
}

.ag-theme-alpine .ag-body-horizontal-scroll-viewport {
    display: none !important; /* CRITICAL: Hide horizontal scrollbar viewport */
}

/* Hide AG Grid native vertical scrollbar containers entirely */
.ag-theme-alpine .ag-body-vertical-scroll-viewport,
.ag-theme-alpine .ag-body-vertical-scroll {
    display: none !important;
}

/* Any AG Grid vertical scrollbar remnants (defensive) */
.ag-theme-alpine [class*="vertical-scroll"] {
    display: none !important;
}

/* Custom scrollbar styling - Using GZC Color Schema - REMOVED DUPLICATE */

/* Column resize handle - Using GZC Color Schema */
.ag-theme-alpine .ag-header-cell-resize {
    background-color: var(--gzc-success, #6aa84f);
    opacity: 0.7;
    width: 8px; /* enlarge hit area for easier resizing */
    right: 0;
    cursor: col-resize;
    z-index: 5; /* ensure above header content */
    transition: background-color 120ms ease, box-shadow 120ms ease, opacity 120ms ease;
}

.ag-theme-alpine .ag-header-cell-resize:hover {
    opacity: 1;
    background-color: var(--gzc-success, #6aa84f);
    box-shadow: 0 0 0 2px color-mix(in srgb, var(--gzc-success, #6aa84f) 60%, transparent);
}

/* Stronger cue when hovering the header cell itself */
.ag-theme-alpine .ag-header-cell:hover .ag-header-cell-resize {
    opacity: 1;
    background-color: var(--gzc-success, #7bd35a);
}

/* Active drag feedback */
.ag-theme-alpine .ag-header-cell-resize:active {
    opacity: 1;
    background-color: var(--gzc-success, #80e063);
    box-shadow: 0 0 0 3px color-mix(in srgb, var(--gzc-success, #6aa84f) 75%, transparent);
}

/* Selection styling - Using GZC Color Schema */
.ag-theme-alpine .ag-row-selected {
    background-color: color-mix(
        in hsl,
        var(--gzc-success, #6aa84f) 10%,
        transparent
    ) !important;
}

.ag-theme-alpine .ag-row:hover {
    background-color: var(--gzc-surface-alt, #2a2a2a) !important;
}

/* Header styling - Using GZC Color Schema */
.ag-theme-alpine .ag-header-cell {
    background-color: var(--gzc-surface-alt, #1e1e1e);
    color: var(--gzc-text, #eaeaea);
    border-color: var(--gzc-border, #333333);
    font-weight: 600;
    text-transform: uppercase;
    font-size: 9px;
    letter-spacing: 0.5px;
}

/* Keep the header always inside the visible view area */
.ag-theme-alpine .ag-header {
    position: sticky;
    top: 0;
    left: 0;
    right: 0;
    z-index: 3; /* above rows, below our custom scrollbars */
}

/* Ensure header container doesn't overflow outside grid viewport */
.ag-theme-alpine .ag-header-viewport,
.ag-theme-alpine .ag-header-container {
    overflow: hidden;
}

.ag-theme-alpine .ag-header-cell:hover {
    background-color: var(--gzc-surface, #2a2a2a);
}

/* Cell content styling - Using GZC Color Schema */
.ag-theme-alpine .ag-cell {
    padding: 5px 6px;
    line-height: 1.2;
    color: var(--gzc-text, #eaeaea);
    background-color: var(--gzc-bg, #111111);
    border-color: var(--gzc-border, #333333);
    font-size: 9px;
}

/* Ensure rows fill available space */
.ag-theme-alpine .ag-row {
    height: 30px !important;
    cursor: context-menu !important; /* Show context menu cursor on rows */
}

/* Force context-menu cursor on all cells */
.ag-theme-alpine .ag-cell {
    cursor: context-menu !important;
}

/* Remove any bottom padding/margin from the grid */
.ag-theme-alpine .ag-body-container {
    padding-bottom: 0 !important;
    margin-bottom: 0 !important;
    height: 100% !important; /* Fill full height */
    overflow: hidden !important; /* Prevent overflow */
}

/* Portfolio table wrapper - hide overflow scrollbars */
/* The portfolio component container should own the native scrollbars */
.portfolio-table-wrapper {
    overflow: auto !important;
}

/* Show native scrollbars on the component container */
.portfolio-table-wrapper::-webkit-scrollbar {
    display: initial !important;
    width: auto !important;
    height: auto !important;
}

.portfolio-table-wrapper {
    scrollbar-width: auto !important;
}

/* Hide ALL possible scrollbars in ALL AG Grid containers - MORE AGGRESSIVE */
.ag-theme-alpine * {
    scrollbar-width: none !important;
}

.ag-theme-alpine *::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
}

/* Hide scrollbars in root wrapper and grid root */
.ag-root-wrapper::-webkit-scrollbar,
.ag-root::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
}

.ag-root-wrapper,
.ag-root {
    scrollbar-width: none !important;
}

/* Hide scrollbars on parent portfolio card containers without affecting overflow behavior */
.portfolio-card-body::-webkit-scrollbar,
.portfolio-card::-webkit-scrollbar,
[class*="portfolio-card"]::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    height: 0 !important;
}

.portfolio-card-body,
.portfolio-card,
[class*="portfolio-card"] {
    scrollbar-width: none !important;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .ag-theme-alpine {
        --ag-font-size: 9px;
    }

    .ag-theme-alpine .ag-cell {
        padding: 4px 5px;
    }

    .ag-theme-alpine .ag-header-cell {
        font-size: 9px;
    }
}
